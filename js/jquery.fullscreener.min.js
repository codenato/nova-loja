!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){"use strict";var i=(t(document),t(window)),e={container:"fsr-container",image:"fsr-image",hidden:"fsr-hidden"},n={useCSS:!0,container:"parent",position:{x:"center",y:"center"},throttleTimeout:100},s="backgroundSize"in document.createElement("div").style,a=function(i,e){if(this.image=i,this.$image=t(i),this.settings=t.extend({},n,e),this.params={image:{width:null,height:null},container:{width:null,height:null},ratios:{image:null,container:null}},"parent"===this.settings.container)this.$container=this.$image.parent();else{if(!(this.settings.container instanceof jQuery&&this.settings.container.length))return void this.log("The container is missing.");this.$container=this.settings.container}this.id=this.uuid(),this.init()};a.fn=a.prototype,a.fn.init=function(){if(this.$image.addClass(e.image),this.$container.addClass(e.container),s&&this.settings.useCSS)this.setBackground();else{if(s&&this.settings.useCSS)return void this.log("No resize method.");this.listen(),this.resize()}},a.fn.setBackground=function(){var t=this.$image,i=this.$container,n=this.settings.position;t.addClass(e.hidden),i.css({"background-image":"url("+t[0].src+")","background-position":n.x+" "+n.y})},a.fn.listen=function(){var t=this;i.on("resize."+this.id+" orientationchange."+this.id,this.throttle(function(){t.resize()},this.settings.throttleTimeout))},a.fn.resize=function(){this.calcRatios(),this.update()},a.fn.calcRatios=function(){var t,i,e,n,s=this.$image,a=this.$container,r=this.params;if(!r.ratios.image){if(!s.attr("width")||!s.attr("height"))return void this.log("The image should have width/height attributes.");t=parseInt(s.attr("width"),10),i=parseInt(s.attr("height"),10),r.ratios.image=i/t,r.image.width=t,r.image.height=i}e=a.width(),n=a.height(),r.ratios.container=n/e,r.container.width=e,r.container.height=n},a.fn.update=function(){var t=this.$image,i=this.params.ratios,e=this.params.container,n=this.settings,s={width:0,height:0,top:"auto",right:"auto",bottom:"auto",left:"auto"};switch(i.image<i.container?(s.width=e.height/i.image,s.height=e.height):(s.width=e.width,s.height=e.width*i.image),n.position.y){case"top":s.top=0;break;case"bottom":s.bottom=0;break;case"center":s.top=(e.height-s.height)/2;break;default:return void this.log("The vertical position cannot be calculated.")}switch(n.position.x){case"left":s.left=0;break;case"right":s.right=0;break;case"center":s.left=(e.width-s.width)/2;break;default:return void this.log("The horizontal position cannot be calculated.")}t.css(s)},a.fn.destroy=function(){var t=this.$image,n=this.$container;t.removeClass(e.hidden).removeClass(e.image).removeAttr("style"),n.removeClass(e.container).removeAttr("style"),i.off("resize."+this.id+" orientationchange."+this.id),t.removeData("fullscreener")},a.fn.throttle=function(t,i,e){function n(){h=0==e.leading?0:new Date,o=null,r=t.apply(s,a)}var s,a,r,o=null,h=0,e=e||{};return function(){var c,l=new Date;return h||0!=e.leading||(h=l),c=i-(l-h),s=this,a=arguments,0>=c?(clearTimeout(o),o=null,h=l,r=t.apply(s,a)):o||0==e.leading||(o=setTimeout(n,c)),r}},a.fn.uuid=function(){return"fsr"+parseInt((new Date).getTime()/1e3,10)},a.fn.log=function(t){alert("Fullscreener "+t)},t.fn.fullscreener=function(i){return this.each(function(){var e=t(this),n=e.data("fullscreener");n?"string"==typeof i&&(n[i]?n[i]():a.fn.log("No valid method.")):"string"!=typeof i&&e.data("fullscreener",new a(this,i))})}});